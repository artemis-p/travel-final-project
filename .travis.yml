language: ruby
rvm:
- 2.6.3
before_install:
- cd date_spot-rails
- export GEM_HOME=$PWD/vendor/bundle/ruby/2.6.3
- gem install bundler
gemfile: date_spot-rails/
cache: bundler
services:
- postgresql
before_script:
- bundle exec rails db:create
- bundle exec rails db:migrate

script:
- bundle exec rspec

deploy:
  provider: heroku
  api_key:
    secure: H388rQDdLpKpvMgoQ7O02wviBhDTZeBiXwlP1uSh80VipS0gLDmjWV8pc/Yr0KbBgmNuUU4WwWcWkjq+SKCvixVLoZCh037Eqs1XAYrD0PnnRtX4qEgffqWOOHJxL851okgyj+zKwHMcVBDd6kkZa5Cxxu87mwKMF9nyBSMg/wJW+BthxkvgXI8K5uc0FbULVlrDYy2rL2/agFF9z9Kcf7DVTuLRmxB2T3DyMcdL4dMJ0di8eKSY+SObGWkhienu4PxI9Jk+2wJCO2cJSVPvbNBtA89QItBmrQTG4DJ2WxfMx/6+/i/z8KvZLTXHSfO0QdqJgP0u4uQVCgWmkz157q6AIXhIz1jLHpp7a7tHD4xEqN7fkSVzcaQmrRHeyYH5IqrRa2MPd9ZBXqq84Dk9yKt7ktAeWdDEaNYfPrigQqaOb2swY7hcGUID4ccjopuC/cobGWZiyZD8WHBNmeM/V/Jjorvfv4bK0+RYVROHjhpI64ivMg6qYj91Xo7qyyac9u24AoTVbwsgkPr7QoPPOiWOS0oJAjsuqudt5PskPv+Sw/c2f+O51cMqF1iVB+KUIjlnkDi0USU4E7Qgs09UQBVUfWn1JHFimIVKuH//muOFVzjQME/0VXjZqc2UnOImsZq0N/hSuJ9k3hRX+wgyAER1Qe3TeI7lOYYjQjDi2rE=
  run:
  - rake pg:reset
  - rake db:migrate
  - rake db:seed
  app: date-spot-final
  on:
    repo: rafahg/travel-final-project
